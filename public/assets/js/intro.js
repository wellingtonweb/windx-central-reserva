function shakeError(e){$("."+e).removeClass("animate__fadeInUp").addClass("animate__shakeX"),setTimeout((()=>{$("."+e).removeClass("animate__shakeX")}),1e3)}$(".open_reset_password").click((function(){$("small.text-danger").text(""),$("input").removeClass("is-invalid")})),$(".close_reset_password").click((function(){$("small.text-danger").text(""),$("input").removeClass("is-invalid")})),$("#form_login").submit((async function(e){e.preventDefault(),$(".loading").removeClass("d-none");let t=$(this).serializeArray();$("#btn-login").fadeIn().text("Entrando..."),setTimeout((()=>{$("#btn-login").fadeIn().text("Validando...")}),1e3);try{let e=await fetch("/assinante/logon",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":t[0].value},body:JSON.stringify({login:t[1].value,password:t[2].value})}),a=await e.json();void 0===a.error&&e.status>200&&($("#btn-login").text("Entrar"),Swal.fire({title:"403 - Serviço indisponível!",html:"Informe em nossa<br> Central de Atendimento.",icon:"error",confirmButtonColor:"#208637",confirmButtonText:"Central de Atendimento",showCloseButton:!0,willClose:()=>{$(this)[0].reset()}}).then((e=>{e.isConfirmed&&window.open("https://api.whatsapp.com/send?phone=558000282309&text=Desejo%20falar%20com%20atendimento%20Windx!")}))),e.status>200&&($("#btn-login").text("Entrar"),shakeError("form-signin"),a.error.login&&($("#btn-login").text("Entrar"),$("small.login_error").text(a.error.login)),a.error.password&&($("#btn-login").text("Entrar"),$("small.password_error").text(a.error.password)),422!=e.status&&Swal.fire({title:a.error,text:"Confirme seus dados de acesso em nossa Central de Atendimento.",icon:"warning",confirmButtonColor:"#208637",confirmButtonText:"Central de Atendimento",showCloseButton:!0,willClose:()=>{$(this)[0].reset()}}).then((e=>{e.isConfirmed&&window.open("https://api.whatsapp.com/send?phone=558000282309&text=Desejo%20falar%20com%20atendimento%20Windx!")}))),200===e.status&&($("#container-logo").addClass("animate__animated animate__fadeOutUp"),$("#btn-contact").addClass("animate__animated animate__fadeOutRight"),$("#footer").addClass("animate__animated animate__fadeOutDown"),$(this)[0].reset(),$("#btn-login").text("Entrar"),$(".form-signin").removeClass("animate__fadeInUp").addClass("animate__fadeOutUpBig"),$(".loader").removeClass("d-none"),location.href="/assinante/home")}catch(e){}})),$(".toggle-password").click((function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$($(this).attr("toggle"));"password"==e.attr("type")?e.attr("type","text"):e.attr("type","password")})),$(".reload").click((function(){$(".captcha img").click(),$(this).addClass("fa-spin"),setTimeout((()=>{$(this).removeClass("fa-spin")}),800)})),setTimeout((()=>{$(".full-screen-splash").addClass("animate__animated animate__fadeOut_ animate__zoomOut d-none"),$(".logo-windx").removeClass("d-none").addClass("animate__animated animate__fadeInDown"),$(".form-signin").removeClass("d-none").addClass("animate__animated animate__fadeInUp"),$(".mastfoot").removeClass("d-none").addClass("animate__animated animate__fadeInUp"),$(".button-card-contact").removeClass("d-none").addClass("animate__animated animate__slideInRight")}),"3000");
